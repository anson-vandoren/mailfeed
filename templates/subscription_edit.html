<article id="subscription-{{ sub.subscription.id }}" style="margin-bottom: 1rem; border: 2px solid var(--pico-primary); border-radius: var(--pico-border-radius); padding: 1rem;">
    <form hx-patch="/subscriptions/{{ sub.subscription.id }}"
          hx-target="#subscription-{{ sub.subscription.id }}"
          hx-indicator="#edit-spinner-{{ sub.subscription.id }}">
        
        <h4>✏️ Edit Subscription</h4>
        
        <div class="grid">
            <label>
                Name
                <input type="text" 
                       name="friendly_name" 
                       id="friendly_name_{{ sub.subscription.id }}"
                       value="{{ sub.subscription.friendly_name }}"
                       placeholder="My favorite blog">
            </label>
            
            <label>
                Frequency
                <select name="frequency" id="frequency_{{ sub.subscription.id }}">
                    <option value="realtime" {% if sub.subscription.frequency == "realtime" %}selected{% endif %}>Realtime</option>
                    <option value="hourly" {% if sub.subscription.frequency == "hourly" %}selected{% endif %}>Hourly</option>
                    <option value="daily" {% if sub.subscription.frequency == "daily" %}selected{% endif %}>Daily</option>
                </select>
            </label>
            
            <label>
                Max Items
                <input type="number" 
                       name="max_items" 
                       id="max_items_{{ sub.subscription.id }}"
                       value="{{ sub.subscription.max_items }}"
                       min="1"
                       max="100">
            </label>
            
            <label>
                Delivery Method
                <select name="delivery_method" id="delivery_method_{{ sub.subscription.id }}">
                    <option value="telegram_only" {% if sub.subscription.delivery_method == "telegram_only" %}selected{% endif %}>📱 Telegram Only</option>
                    <option value="email_only" {% if sub.subscription.delivery_method == "email_only" %}selected{% endif %}>📧 Email Only</option>
                    <option value="both" {% if sub.subscription.delivery_method == "both" %}selected{% endif %}>📱📧 Both</option>
                </select>
            </label>
        </div>
        
        <label>
            <input type="checkbox" 
                   name="is_active" 
                   id="is_active_{{ sub.subscription.id }}"
                   value="on"
                   {% if sub.subscription.is_active %}checked{% endif %}
                   role="switch">
            Active subscription
        </label>
        
        <div style="display: flex; gap: 0.5rem; justify-content: flex-end; padding-top: 1rem;">
            <button type="button"
                    hx-get="/subscriptions/{{ sub.subscription.id }}"
                    hx-target="#subscription-{{ sub.subscription.id }}"
                    class="secondary">
                Cancel
            </button>
            
            <button type="submit">
                <span id="edit-spinner-{{ sub.subscription.id }}" class="htmx-indicator">⏳</span>
                💾 Save Changes
            </button>
        </div>
    </form>
</article>